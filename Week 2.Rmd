---
title: "Python Week 2"
author: "Group 2"
date: "2025-10-08"
output: html_document
---


```{python}
import os
import requests
import json
import pandas as pd
```

```{python}
# Step 1: Create necessary folders if they don't exist
folders = ["data/raw", "data/clean", "reports"]
for folder in folders:
  os.makedirs(folder, exist_ok=True)
```

```{python}

url = "https://ghoapi.azureedge.net/api/WHOSaS_000001"
try:
    response = requests.get(url)
    response.raise_for_status()
    data_text = response.text
    df = pd.json_normalize(json.loads(data_text))
except Exception as e:
    print("âš  JSON parsing failed. Creating a simulated dataset instead.")
    np.random.seed(42)
    df = pd.DataFrame({
        "Age": np.random.choice(range(18, 36), size=50, replace=True),
        "Gender": np.random.choice(["M", "F"], size=50, replace=True),
        "Region": np.random.choice(["Central", "Eastern", "Northern", "Western"], size=50, replace=True),
        "Hospitalization": np.random.choice([0, 1], size=50, replace=True),
        "ClaimCost": np.round(np.random.uniform(20000, 150000, size=50), 0)
    })
```
```{python}
# Step 3: Save dataset
```


```{python}
df.to_csv("C:/Users/HP/Desktop/data/raw.csv", index=False)
print("âœ… Dataset saved ")

```
```{python}
# Step 4: Define Health Micro-Insurance Product
product_def = """Health Micro-Insurance Product
------------------------------
Target Market: Young workers (18â€“35) in informal employment
Coverage: Hospitalization, basic outpatient visits, emergencies
Premium: UGX 20,000â€“50,000 per month
Benefits: Cashless hospital payments, reimbursement of medical costs
Risk Factors: Age, Gender, Region
Payment Channels: Mobile money (MTN, Airtel), bank payments"""
```
```{python}
# Step 5: Save product definition
with open("reports/Week2_Product_Definition.txt", "w") as f:
    f.write(product_def)
print("âœ… Product definition saved to reports/Week2_Product_Definition.txt")
```
```{python}
# Step 6: Confirm files
print("C:/Users/HP/Desktop/Python Project/data/raw")
print(os.listdir("C:/Users/HP/Desktop/Python Project/data/raw"))

print("C:/Users/HP/Desktop/Python Project/reports")
print(os.listdir("C:/Users/HP/Desktop/Python Project/reports"))

print("/nðŸŽ¯ Week 2 completed successfully!")
```

